<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-end mb-3">
    <h1 class="mb-0 d-flex me-3">Lista de registros</h1>
    <div>
      <p-button
        label="Alta"
        routerLink="nuevo"
      ></p-button>
    </div>
  </div>
  <p-table
    #table
    [value]="specialMemberInfo"
    [loading]="loading"
    selectionMode="single"
    showGridlines

    paginator
    [rows]="10"
    [rowsPerPageOptions]="[10,25,50,100,300]"

    lazy
    (onLazyLoad)="loadData($event)"
    [totalRecords]="totalRecords"
  >
    <ng-template #header>
      <tr>
        <th pSortableColumn="roleCensus">Censo <p-sortIcon field="roleCensus"/></th>
        <th>Nombre</th>
        <th>Registro</th>
      </tr>
      <tr>
        <th>
          <input
            class="w-100"
            pInputText
            placeholder="Filtrar censo"
            (input)="table.filter($any($event.target).value, 'census', 'custom')"
          >
        </th>
        <th>
          <input
            class="w-100"
            pInputText
            placeholder="Filtrar por nombre"
            (input)="table.filter($any($event.target).value, 'name', 'custom')"
          >
        </th>
        <th>
          <p-multiSelect
            styleClass="w-100 fw-normal"
            appendTo="body"
            [options]="specialMemberOptions"
            [filter]="false"
            [showToggleAll]="false"
            showClear
            placeholder="Filtrar registro"
            (onChange)="table.filter($event.value, 'roles', 'custom')"
            (onClear)="table.filter(null, 'roles', 'custom')"
          ></p-multiSelect>
        </th>
      </tr>
    </ng-template>
    <ng-template #body let-specialMember>
      <tr class="d-table-row" pSelectableRow [routerLink]="specialMember.id">
        <td>
          {{ specialMember.roleCensus | census:specialMember.role }}
        </td>
        <td>
          {{ specialMember.name }}
        </td>
        <td>
          {{ specialMember.role | specialRole:true }}
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
